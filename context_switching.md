# Context Switch

`注：本文以Linux Kernel为背景。`

上下文切换（有时也称为进程切换或线程切换）是CPU（中央处理单元）从一个进程或线程切换到另一个进程或线程。

上下文是主要指任意时刻的CPU寄存器、程序计数器等的状态。

上下文切换是实现time-sharing的多任务机制的基础。

# 上下文切换发生的时机

* 中断
	* 硬件中断
		* 网络事件
		* 键盘事件
		* ...
	* I\O中断
	* 时钟中断
* 用户态和内核态间的转换
	* 系统调用
* 优先级抢占
	* 通常为ROS类的实时操作系统

# 上下文切换的步骤


# 上下文切换的代价

上下文切换的缺点是上下文切换需要一定的时间，即上下文切换时间。保存一个处于运行状态的进程的上下文，然后获取即将进入运行状态的另一个进程的上下文，需要时间。在这段时间内，从用户的角度来看，CPU没有做任何有用的工作。因此，在这种情况下，上下文切换是纯粹的开销。